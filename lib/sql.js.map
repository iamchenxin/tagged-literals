{"version":3,"sources":["sql.js"],"names":[],"mappings":";;;;;;;AAQA,SAAS,kBAAT,CAA4B,KAA5B,EAAmC;AACjC,OAAK,KAAL,GAAa,KAAb;AACA,OAAK,OAAL,iEACc,KADd;AAEA,OAAK,QAAL,GAAgB,YAAW;AAAE,WAAO,KAAK,OAAZ;AAAqB,GAAlD;AACD;;AAED,SAAS,WAAT,CAAqB,KAArB,EAA4B;AAC1B,OAAK,KAAL,GAAa,KAAb;AACD;;AAED,SAAS,IAAT,CAAc,KAAd,EAAwC;AACtC,MAAI,OAAO,KAAP,KAAiB,QAArB,EAA+B;AAC7B,UAAM,IAAI,kBAAJ,CAAuB,KAAvB,CAAN;AACD;AACD,MAAI,MAAM,CAAN,MAAW,GAAf,EAAoB;AAClB,kBAAY,KAAZ,O;AACD;AACD,SAAO,IAAI,WAAJ,CAAgB,KAAhB,CAAP;AACD;;;AAGD,SAAS,GAAT,CAAa,IAAb,EAAwD;AAAA,oCAAzB,IAAyB;AAAzB,QAAyB;AAAA;;AACtD,MAAM,SAAQ,EAAd;AACA,MAAM,OAAO,KAAK,MAAL,CAAY,UAAC,IAAD,EAAO,IAAP,EAAa,CAAb,EAAmB;AAC1C,QAAM,MAAM,KAAK,IAAE,CAAP,CAAZ;AACA,QAAI,eAAe,WAAnB,EAAgC;AAC9B,aAAO,OAAK,IAAI,KAAT,GAAe,IAAtB;AACD,KAFD,MAEO;AACL,aAAO,IAAP,CAAY,GAAZ;AACA,aAAO,OAAK,GAAL,GAAS,OAAO,MAAhB,GAAuB,IAA9B;AACD;AACF,GARY,CAAb;;AAUA,SAAO;AACL,UAAK,IADA;AAEL,YAAQ;AAFH,GAAP;AAID;;QAGC,I,GAAA,I;QACA,G,GAAA,G","file":"sql.js","sourcesContent":["/*\n *@flow\n */\ntype sqlResult = {\n  text:string,\n  values:mixed[]\n};\n\nfunction SQL_LITERALS_ERROR(value) {\n  this.value = value;\n  this.message = `the value inserted to SQL must be string,\n    but it is ${value}`;\n  this.toString = function() { return this.message;};\n}\n\nfunction InsertValue(value) {\n  this.value = value;\n}\n\nfunction inst(value:string):InsertValue {\n  if (typeof value !== 'string') {\n    throw new SQL_LITERALS_ERROR(value);\n  }\n  if (value[0]!=='\"') {\n    value = `\"${value}\"`; // auto double quoted,to void\n  }\n  return new InsertValue(value);\n}\n\n//for postgres sql\nfunction SQL(strs:string[], ...args:mixed[]): sqlResult {\n  const values =[];\n  const text = strs.reduce((prev, curr, i) => {\n    const arg = args[i-1];\n    if (arg instanceof InsertValue) {\n      return prev+arg.value+curr;\n    } else {\n      values.push(arg);\n      return prev+'$'+values.length+curr;\n    }\n  });\n\n  return {\n    text:text,\n    values: values\n  };\n}\n\nexport {\n  inst,\n  SQL\n};\n"],"sourceRoot":"/home/iamchenxin/project/lang/tagged-literals/src"}